<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按摩工作室記帳系統</title>

    <!-- CSS 樣式表 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8F4F0;
            color: #5C5C5C;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: #FFFFFF;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #795548;
            margin-bottom: 20px;
        }

        /* 輸入區樣式 */
        .input-group {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .input-group label {
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        input[type="number"], input[type="date"], textarea {
            width: 80%;
            padding: 15px;
            font-size: 1.2em;
            text-align: center;
            border: 2px solid #CA8E82;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s;
            margin-bottom: 10px;
        }
        
        textarea {
            resize: vertical;
            min-height: 80px;
            text-align: left;
        }

        input[type="number"]:focus, input[type="date"]:focus, textarea:focus {
            border-color: #D6A296;
        }
        
        /* 按鈕樣式 */
        .button-group {
            margin-bottom: 15px;
        }

        .toggle-btn {
            font-size: 1.2em;
            padding: 12px 25px;
            margin: 5px;
            border: 2px solid #EAE3DD;
            background-color: #EAE3DD;
            color: #795548;
            border-radius: 50px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .toggle-btn.active {
            background-color: #CA8E82;
            color: white;
            border-color: #CA8E82;
        }
        
        /* 送出按鈕樣式 */
        #submit-btn {
            font-size: 1.8em;
            padding: 15px 40px;
            background-color: #CA8E82;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            width: 80%;
            margin-top: 20px;
            transition: background-color 0.3s, transform 0.2s;
        }

        #submit-btn:hover {
            background-color: #D6A296;
            transform: scale(1.05);
        }
        
        hr {
            border: 0;
            height: 1px;
            background-color: #EAE3DD;
            margin: 40px 0;
        }
        
        /* 統計區樣式 */
        .stats {
            text-align: left;
            margin-top: 30px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #EAE3DD;
        }
        
        .stat-item:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-size: 1.2em;
            color: #5C5C5C;
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #CA8E82;
        }
        
        /* 比例條樣式 */
        .ratio-bar-container {
            width: 100%;
            height: 30px;
            background-color: #EAE3DD;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
        }
        
        .ratio-bar {
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            transition: width 0.5s ease-in-out;
        }

        #gender-ratio-bar-male {
            background-color: #CA8E82;
        }

        #customer-ratio-bar-new {
            background-color: #CA8E82;
        }

        /* 月份導覽樣式 */
        .month-navigator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            color: #CA8E82;
            cursor: pointer;
            padding: 0 10px;
        }

        .nav-btn:disabled {
            color: #EAE3DD;
            cursor: not-allowed;
        }

        .current-month-display {
            font-size: 1.5em;
            font-weight: bold;
            margin: 0 15px;
        }

        /* 訂單列表開關按鈕樣式 */
        .toggle-order-list {
            background-color: #CA8E82;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        .order-list-container {
            display: none;
            text-align: left;
            margin-top: 20px;
        }
        
        .order-list-container.show {
            display: block;
        }

        .order-item {
            background-color: #F8F4F0;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .order-details {
            display: flex;
            flex-direction: column;
            text-align: left;
            flex: 1;
        }
        
        .order-actions {
            margin-top: 10px;
        }
        
        .order-actions button {
            background-color: #CA8E82;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
            transition: background-color 0.2s;
        }

        .order-actions .delete-btn {
            background-color: #d9534f;
        }

        .order-actions .delete-btn:hover {
            background-color: #c9302c;
        }
        
        .order-actions button:hover {
            background-color: #D6A296;
        }
        
        /* 編輯彈窗樣式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            text-align: center;
            position: relative;
        }

        .close-btn {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .modal-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .modal-buttons button {
            padding: 10px 20px;
            font-size: 1.2em;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .modal-buttons .confirm {
            background-color: #CA8E82;
            color: white;
        }

        .modal-buttons .cancel {
            background-color: #EAE3DD;
            color: #5C5C5C;
        }

        /* 成長比較文字樣式 */
        .comparison-text {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .growth-positive {
            color: #28a745;
            font-weight: bold;
        }

        .growth-negative {
            color: #dc3545;
            font-weight: bold;
        }
    </style>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, query, where, onSnapshot, doc, deleteDoc, updateDoc, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // =========================================================
        //  請在這裡貼上您的 Firebase 專案設定程式碼！
        //  請務必從 Firebase Console 的「專案設定」中複製。
        // =========================================================
        const firebaseConfig = {
  apiKey: "AIzaSyBOitrzS23T83R0TNBUM0WpnStotTBuyAg",
  authDomain: "massage-studio-accounting.firebaseapp.com",
  projectId: "massage-studio-accounting",
  storageBucket: "massage-studio-accounting.firebasestorage.app",
  messagingSenderId: "304652442672",
  appId: "1:304652442672:web:fb833a5084edf8087161f5",
  measurementId: "G-VP4M1FBR0G"
};
        // =========================================================

        // 確保 firebaseConfig 存在且有內容
        if (Object.keys(firebaseConfig).length === 0) {
            console.error("Firebase 設定遺失。請在 firebaseConfig 中填入您的專案資訊。");
        } else {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            const recordsCol = collection(db, "records");
        
            let selectedGender = '';
            let selectedCustomerType = '';
            let currentDate = new Date();
            let displayMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        
            // 新的 formatDate 函式，用於處理 YYYY-MM-DD 和 YYYY-MM 的格式，確保月份和日期都有兩位數
            const formatDate = (date, includeDay = true) => {
                const year = date.getFullYear();
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const day = date.getDate().toString().padStart(2, '0');
                if (includeDay) {
                    return `${year}-${month}-${day}`;
                }
                return `${year}-${month}`;
            };
        
            // 彈窗相關變數
            const editModal = document.getElementById('editModal');
            const deleteModal = document.getElementById('deleteModal');
            let currentDocId = null;
        
            const updateStats = (month) => {
                const currentMonthStr = formatDate(month, false);
                document.getElementById('current-month-display').innerText = currentMonthStr;
        
                const nextBtn = document.getElementById('next-month-btn');
                const today = new Date();
                if (month.getFullYear() === today.getFullYear() && month.getMonth() === today.getMonth()) {
                    nextBtn.disabled = true;
                } else {
                    nextBtn.disabled = false;
                }
        
                const formatComparisonText = (currentValue, prevValue) => {
                    if (prevValue === null || prevValue === 0) {
                        return `無上月資料`;
                    }
                    const percentage = ((currentValue - prevValue) / prevValue) * 100;
                    const sign = percentage >= 0 ? '▲' : '▼';
                    const colorClass = percentage >= 0 ? 'growth-positive' : 'growth-negative';
                    return `<span class="${colorClass}">${sign} ${Math.abs(percentage).toFixed(2)}%</span>`;
                };
        
                // =========================================================
                //  重要！如果您看不到資料，請打開瀏覽器開發者工具 (F12)，
                //  檢查是否有錯誤訊息提示您需要建立一個複合索引。
                //  這個查詢需要對 `month` 和 `date` 建立複合索引。
                // =========================================================
                const qCurrent = query(recordsCol, where("month", "==", currentMonthStr), orderBy("date", "desc"));
                onSnapshot(qCurrent, (currentSnapshot) => {
                    let totalAmount = 0;
                    let maleCount = 0;
                    let femaleCount = 0;
                    let newCount = 0;
                    let oldCount = 0;
                    const totalEntries = currentSnapshot.docs.length;
        
                    const orderListContainer = document.getElementById('order-list');
                    orderListContainer.innerHTML = '';
                    currentSnapshot.forEach((doc) => {
                        const data = doc.data();
                        totalAmount += data.amount;
                        if (data.gender === '男性') maleCount++;
                        if (data.gender === '女性') femaleCount++;
                        if (data.customerType === '新客') newCount++;
                        if (data.customerType === '舊客') oldCount++;
        
                        const notesHtml = data.notes ? `<p style="margin-top: 5px; color: #888;">備註: ${data.notes}</p>` : '';
        
                        const orderItem = document.createElement('div');
                        orderItem.classList.add('order-item');
                        orderItem.innerHTML = `
                            <div class="order-details">
                                <strong>金額: ${data.amount.toLocaleString()} 元</strong>
                                <span>日期: ${data.date}</span>
                                <span>性別: ${data.gender} | 客群: ${data.customerType}</span>
                                ${notesHtml}
                            </div>
                            <div class="order-actions">
                                <button class="edit-btn" data-id="${doc.id}">編輯</button>
                                <button class="delete-btn" data-id="${doc.id}">刪除</button>
                            </div>
                        `;
                        orderListContainer.appendChild(orderItem);
                    });
        
                    document.getElementById('monthly-total').innerText = totalAmount.toLocaleString() + ' 元';
                    document.getElementById('total-appointments').innerText = totalEntries;
        
                    const maleRatio = totalEntries > 0 ? ((maleCount / totalEntries) * 100) : 0;
                    const femaleRatio = 100 - maleRatio;
                    document.getElementById('gender-ratio-bar-male').style.width = `${maleRatio}%`;
                    document.getElementById('gender-ratio-bar-male').innerText = maleRatio > 0 ? `${maleRatio.toFixed(0)}%` : '';
                    document.getElementById('gender-ratio-bar-female').style.width = `${femaleRatio}%`;
                    document.getElementById('gender-ratio-bar-female').innerText = femaleRatio > 0 ? `${femaleRatio.toFixed(0)}%` : '';
        
                    const newRatio = totalEntries > 0 ? ((newCount / totalEntries) * 100) : 0;
                    const oldRatio = 100 - newRatio;
                    document.getElementById('customer-ratio-bar-new').style.width = `${newRatio}%`;
                    document.getElementById('customer-ratio-bar-new').innerText = newRatio > 0 ? `${newRatio.toFixed(0)}%` : '';
                    document.getElementById('customer-ratio-bar-old').style.width = `${oldRatio}%`;
                    document.getElementById('customer-ratio-bar-old').innerText = oldRatio > 0 ? `${oldRatio.toFixed(0)}%` : '';
                    
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        btn.addEventListener('click', handleDeleteClick);
                    });
                    document.querySelectorAll('.edit-btn').forEach(btn => {
                        btn.addEventListener('click', handleEditClick);
                    });
        
                    const prevMonth = new Date(month.getFullYear(), month.getMonth() - 1, 1);
                    const prevMonthStr = formatDate(prevMonth, false);
                    const qPrev = query(recordsCol, where("month", "==", prevMonthStr));
                    onSnapshot(qPrev, (prevSnapshot) => {
                        let prevTotalAmount = 0;
                        let prevTotalEntries = prevSnapshot.docs.length;
                        
                        if (prevTotalEntries > 0) {
                            prevSnapshot.forEach(doc => {
                                prevTotalAmount += doc.data().amount;
                            });
                        } else {
                            prevTotalAmount = null;
                            prevTotalEntries = null;
                        }
                        
                        document.getElementById('appointment-growth').innerHTML = formatComparisonText(totalEntries, prevTotalEntries);
                        document.getElementById('revenue-growth').innerHTML = formatComparisonText(totalAmount, prevTotalAmount);
                    });
                });
            };
        
            const handleDeleteClick = (e) => {
                currentDocId = e.target.dataset.id;
                document.getElementById('deleteModal').style.display = 'block';
            };
        
            const handleEditClick = (e) => {
                currentDocId = e.target.dataset.id;
                const docDataElement = e.target.closest('.order-item').querySelector('.order-details');
                
                document.getElementById('edit-amount').value = parseInt(docDataElement.querySelector('strong').innerText.match(/\d+/g).join(''));
                document.getElementById('edit-date').value = docDataElement.querySelector('span:nth-child(2)').innerText.replace('日期: ', '');
                
                const gender = docDataElement.querySelector('span:nth-child(3)').innerText.split('|')[0].trim().replace('性別: ', '');
                const customerType = docDataElement.querySelector('span:nth-child(3)').innerText.split('|')[1].trim().replace('客群: ', '');
                
                const notesElement = docDataElement.querySelector('p');
                const notes = notesElement ? notesElement.innerText.replace('備註: ', '') : '';
                document.getElementById('edit-notes').value = notes;
        
                document.querySelectorAll('.edit-gender-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById(`edit-gender-${gender === '男性' ? 'male' : 'female'}`).classList.add('active');
        
                document.querySelectorAll('.edit-customer-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById(`edit-customer-${customerType === '新客' ? 'new' : 'old'}`).classList.add('active');
        
                editModal.style.display = 'block';
            };
        
            const confirmDelete = async () => {
                await deleteDoc(doc(db, "records", currentDocId));
                document.getElementById('deleteModal').style.display = 'none';
            };
        
            const confirmEdit = async () => {
                const newAmount = document.getElementById('edit-amount').value;
                const newDate = document.getElementById('edit-date').value;
                const newGender = document.querySelector('#editModal .edit-gender-btn.active').innerText;
                const newCustomerType = document.querySelector('#editModal .edit-customer-btn.active').innerText;
                const newNotes = document.getElementById('edit-notes').value;
        
                if (!newAmount || !newDate || !newGender || !newCustomerType) {
                    alert("請填寫所有欄位！");
                    return;
                }
        
                const newRecordDate = new Date(newDate);
                const newRecordMonth = formatDate(newRecordDate, false);
                
                await updateDoc(doc(db, "records", currentDocId), {
                    amount: parseInt(newAmount),
                    date: newDate,
                    gender: newGender,
                    customerType: newCustomerType,
                    notes: newNotes,
                    month: newRecordMonth
                });
                editModal.style.display = 'none';
            };
        
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('entry-date').value = formatDate(new Date());
                updateStats(displayMonth);
            });
        
            // 月份導覽按鈕事件
            document.getElementById('prev-month-btn').addEventListener('click', () => {
                displayMonth.setMonth(displayMonth.getMonth() - 1);
                updateStats(displayMonth);
            });
        
            document.getElementById('next-month-btn').addEventListener('click', () => {
                displayMonth.setMonth(displayMonth.getMonth() + 1);
                updateStats(displayMonth);
            });
        
            // 訂單列表開關按鈕事件
            document.getElementById('toggle-order-list-btn').addEventListener('click', () => {
                const listContainer = document.getElementById('order-list-container');
                const button = document.getElementById('toggle-order-list-btn');
                if (listContainer.classList.contains('show')) {
                    listContainer.classList.remove('show');
                    button.innerText = '查看當月所有訂單';
                } else {
                    listContainer.classList.add('show');
                    button.innerText = '隱藏當月所有訂單';
                }
            });
        
            // 編輯彈窗按鈕事件
            document.querySelector('#editModal .close-btn').addEventListener('click', () => editModal.style.display = 'none');
            document.getElementById('edit-confirm-btn').addEventListener('click', confirmEdit);
            document.getElementById('edit-cancel-btn').addEventListener('click', () => editModal.style.display = 'none');
            document.querySelectorAll('.edit-gender-btn').forEach(btn => btn.addEventListener('click', (e) => {
                document.querySelectorAll('.edit-gender-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
            }));
            document.querySelectorAll('.edit-customer-btn').forEach(btn => btn.addEventListener('click', (e) => {
                document.querySelectorAll('.edit-customer-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
            }));
        
            // 刪除彈窗按鈕事件
            document.querySelector('#deleteModal .close-btn').addEventListener('click', () => deleteModal.style.display = 'none');
            document.getElementById('delete-confirm-btn').addEventListener('click', confirmDelete);
            document.getElementById('delete-cancel-btn').addEventListener('click', () => deleteModal.style.display = 'none');
        
            // 輸入區按鈕切換狀態
            const toggleButtons = (groupName, buttonValue) => {
                document.querySelectorAll(`.${groupName}`).forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(buttonValue).classList.add('active');
            };
        
            document.getElementById('gender-male').addEventListener('click', () => {
                selectedGender = '男性';
                toggleButtons('gender-btn', 'gender-male');
            });
            document.getElementById('gender-female').addEventListener('click', () => {
                selectedGender = '女性';
                toggleButtons('gender-btn', 'gender-female');
            });
        
            document.getElementById('customer-new').addEventListener('click', () => {
                selectedCustomerType = '新客';
                toggleButtons('customer-btn', 'customer-new');
            });
            document.getElementById('customer-old').addEventListener('click', () => {
                selectedCustomerType = '舊客';
                toggleButtons('customer-btn', 'customer-old');
            });
        
            document.getElementById('submit-btn').addEventListener('click', async () => {
                const amount = document.getElementById('amount').value;
                const date = document.getElementById('entry-date').value;
                const notes = document.getElementById('notes').value;
        
                if (!amount || !selectedGender || !selectedCustomerType || !date) {
                    alert("請輸入金額並選擇所有標籤與日期！");
                    return;
                }
        
                try {
                    const selectedDate = new Date(date);
                    const recordMonth = formatDate(selectedDate, false);
        
                    await addDoc(recordsCol, {
                        amount: parseInt(amount),
                        gender: selectedGender,
                        customerType: selectedCustomerType,
                        notes: notes,
                        timestamp: new Date(),
                        date: date, // 這裡儲存的日期會是 YYYY-MM-DD 格式
                        month: recordMonth // 儲存 YYYY-MM 格式以方便篩選
                    });
                    
                    // 清空輸入欄位
                    document.getElementById('amount').value = '';
                    document.getElementById('notes').value = '';
                    document.getElementById('entry-date').value = formatDate(new Date());
                    selectedGender = '';
                    selectedCustomerType = '';
                    document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
                    
                    alert("記帳成功！");
                } catch (e) {
                    console.error("Error adding document: ", e);
                    alert("記帳失敗，請檢查網路連線。");
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>記帳輸入</h1>
        
        <div class="input-group">
            <label for="entry-date">日期：</label>
            <input type="date" id="entry-date" aria-label="請輸入日期">

            <label for="amount">金額：</label>
            <input type="number" id="amount" placeholder="請輸入金額" aria-label="請輸入金額">

            <label for="notes">備註：</label>
            <textarea id="notes" placeholder="可選填備註資訊" aria-label="請輸入備註"></textarea>
        </div>
        
        <div class="button-group">
            <p>顧客性別：</p>
            <button id="gender-male" class="toggle-btn gender-btn">男性</button>
            <button id="gender-female" class="toggle-btn gender-btn">女性</button>
        </div>
        
        <div class="button-group">
            <p>顧客類型：</p>
            <button id="customer-new" class="toggle-btn customer-btn">新客</button>
            <button id="customer-old" class="toggle-btn customer-btn">舊客</button>
        </div>

        <button id="submit-btn" aria-label="送出">送出</button>

        <hr>

        <h1>每月統計</h1>
        
        <!-- 月份導覽區 -->
        <div class="month-navigator">
            <button id="prev-month-btn" class="nav-btn" aria-label="上個月">‹</button>
            <span id="current-month-display" class="current-month-display"></span>
            <button id="next-month-btn" class="nav-btn" aria-label="下個月">›</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div style="display:flex; flex-direction: column;">
                    <span class="stat-label">當月總預約數：</span>
                    <span class="comparison-text" id="appointment-growth"></span>
                </div>
                <span class="stat-value" id="total-appointments">0</span>
            </div>
            <div class="stat-item">
                <div style="display:flex; flex-direction: column;">
                    <span class="stat-label">當月總收入：</span>
                    <span class="comparison-text" id="revenue-growth"></span>
                </div>
                <span class="stat-value" id="monthly-total">0 元</span>
            </div>
            
            <!-- 男女佔比比例條 -->
            <div class="stat-item">
                <span class="stat-label">男女佔比：</span>
                <div class="ratio-bar-container">
                    <div id="gender-ratio-bar-male" class="ratio-bar"></div>
                    <div id="gender-ratio-bar-female" class="ratio-bar" style="background-color: #EAE3DD; color: #CA8E82;"></div>
                </div>
            </div>
            
            <!-- 新舊客比比例條 -->
            <div class="stat-item">
                <span class="stat-label">新舊客比：</span>
                <div class="ratio-bar-container">
                    <div id="customer-ratio-bar-new" class="ratio-bar"></div>
                    <div id="customer-ratio-bar-old" class="ratio-bar" style="background-color: #EAE3DD; color: #CA8E82;"></div>
                </div>
            </div>
        </div>

        <button id="toggle-order-list-btn" class="toggle-order-list">查看當月所有訂單</button>
        <div id="order-list-container" class="order-list-container">
            <div id="order-list">
                <!-- 訂單明細會動態載入到這裡 -->
            </div>
        </div>
    </div>

    <!-- 編輯彈窗 -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>編輯訂單</h2>
            <div class="input-group">
                <label for="edit-date">日期：</label>
                <input type="date" id="edit-date" aria-label="請輸入日期">
                <label for="edit-amount">金額：</label>
                <input type="number" id="edit-amount" aria-label="請輸入金額">
                <label for="edit-notes">備註：</label>
                <textarea id="edit-notes" placeholder="可選填備註資訊" aria-label="請輸入備註"></textarea>
            </div>
            <div class="button-group">
                <p>顧客性別：</p>
                <button id="edit-gender-male" class="toggle-btn edit-gender-btn">男性</button>
                <button id="edit-gender-female" class="toggle-btn edit-gender-btn">女性</button>
            </div>
            <div class="button-group">
                <p>顧客類型：</p>
                <button id="edit-customer-new" class="toggle-btn edit-customer-btn">新客</button>
                <button id="edit-customer-old" class="toggle-btn edit-customer-btn">舊客</button>
            </div>
            <div class="modal-buttons">
                <button id="edit-confirm-btn" class="confirm">更新</button>
                <button id="edit-cancel-btn" class="cancel">取消</button>
            </div>
        </div>
    </div>

    <!-- 刪除彈窗 -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>確認刪除</h2>
            <p>確定要刪除這筆訂單嗎？此操作無法復原。</p>
            <div class="modal-buttons">
                <button id="delete-confirm-btn" class="confirm">確定</button>
                <button id="delete-cancel-btn" class="cancel">取消</button>
            </div>
        </div>
    </div>
</body>
</html>
